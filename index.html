<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mini Game‚ú®</title>
    <style>
      body {
        margin: 0;
        font-family: 'Poppins', ui-sans-serif, system-ui;
        background: radial-gradient(circle at top left, #2a1b3d, #0d0b14);
        color: #f5f4fb;
        overflow: hidden;
        cursor: none; /* ·∫©n cursor m·∫∑c ƒë·ªãnh */
      }

      /* Con tr·ªè custom */
      #cursor {
        position: fixed;
        top: 0;
        left: 0;
        width: 40px;
        height: 40px;
        pointer-events: none;
        transform: translate(-50%, -50%);
        font-size: 28px;
        z-index: 9999;
        transition: transform 0.1s linear;
      }

      /* Hi·ªáu ·ª©ng sao r∆°i */
      .stars {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 0;
      }
      .star {
        position: absolute;
        width: 2px;
        height: 60px;
        background: linear-gradient(-45deg, #ffd34e, transparent);
        border-radius: 50%;
        animation: fall linear infinite;
      }
      @keyframes fall {
        from {
          transform: translateY(-100px) translateX(0);
          opacity: 1;
        }
        to {
          transform: translateY(100vh) translateX(-50px);
          opacity: 0;
        }
      }

      .container {
        max-width: 760px;
        margin: auto;
        padding: 24px;
        position: relative;
        z-index: 1;
      }

      h1 {
        font-size: 28px;
        text-align: center;
        margin: 0;
        background: linear-gradient(90deg, #ffd34e, #ff5f9e, #7b61ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 900;
        text-shadow: 0 0 20px rgba(255, 179, 0, 0.5);
        animation: glow 3s infinite alternate;
      }
      @keyframes glow {
        from {
          text-shadow: 0 0 12px #ffb300, 0 0 24px #7b61ff;
        }
        to {
          text-shadow: 0 0 20px #ff5f9e, 0 0 36px #ffd34e;
        }
      }

      .card {
        margin-top: 30px;
        padding: 30px;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.55),
          inset 0 0 20px rgba(255, 179, 0, 0.15);
        min-height: 70vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        animation: fadeIn 0.5s ease;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h2 {
        font-size: 22px;
        margin-bottom: 24px;
        font-weight: 700;
        color: #ffd34e;
        text-shadow: 0 0 10px rgba(255, 179, 0, 0.6);
        white-space: pre-line;
      }

      .options {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        width: 100%;
      }

      .btn {
        flex: 1 1 40%;
        max-width: 200px;
        padding: 22px; /* to h∆°n cho d·ªÖ b·∫•m */
        border-radius: 20px;
        cursor: pointer;
        background: linear-gradient(135deg, #1e1830, #2d2250);
        border: 1px solid rgba(255, 255, 255, 0.2);
        font-weight: 700;
        font-size: 18px; /* ch·ªØ to h∆°n */
        color: #fff;
        transition: all 0.3s ease;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
      }
      .btn:hover {
        transform: scale(1.1);
        background: linear-gradient(135deg, #3a2a60, #1f1738);
        box-shadow: 0 0 30px rgba(255, 179, 0, 0.6); /* glow v√†ng */
      }
      .btn.selected {
        border-color: #ffd34e;
        background: linear-gradient(
          135deg,
          rgba(255, 211, 78, 0.2),
          rgba(255, 95, 158, 0.2)
        );
        box-shadow: 0 0 20px rgba(255, 179, 0, 0.6),
          0 0 35px rgba(123, 97, 255, 0.5);
        transform: scale(1.1);
      }

      input {
        width: 80%;
        padding: 14px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        background: #1e1830;
        color: #fff;
        margin-top: 14px;
        font-size: 15px;
        text-align: center;
      }

      .img-options {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        justify-content: center;
        margin-top: 16px;
        width: 100%;
      }
      .img-options img {
        width: 30%;
        border-radius: 14px;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        object-fit: cover;
      }
      .img-options img:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(255, 211, 78, 0.4);
      }
      .img-options img.selected {
        border-color: #ffd34e;
        box-shadow: 0 0 25px rgba(255, 179, 0, 0.6);
        transform: scale(1.07);
      }

      .footer {
        margin-top: 20px;
        text-align: center;
      }
      .cta {
        padding: 14px 28px;
        border-radius: 14px;
        border: 0;
        background: linear-gradient(90deg, #ffd34e, #ff5f9e, #7b61ff);
        color: #fff;
        font-weight: 800;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 8px 24px rgba(255, 179, 0, 0.45);
        transition: all 0.25s ease;
      }
      .cta:hover {
        transform: scale(1.08);
      }

      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #1f1633;
        padding: 12px 16px;
        border-radius: 10px;
        opacity: 0;
        transition: 0.3s;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
        z-index: 1000;
      }
      .toast.show {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <!-- hi·ªáu ·ª©ng sao -->
    <div class="stars" id="stars"></div>

    <!-- con tr·ªè custom -->
    <div id="cursor">üå†</div>

    <div class="container">
      <h1>‚ôå Mini Game ‚ú®</h1>
      <div id="quiz" class="card"></div>
      <div class="footer">
        <button class="cta" id="next" disabled>Ti·∫øp t·ª•c ‚Üí</button>
      </div>
    </div>

    <div id="toast" class="toast">‚úÖ ƒê√£ l∆∞u l·ª±a ch·ªçn</div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
      // ‚≠ê hi·ªáu ·ª©ng sao r∆°i
      const starContainer = document.getElementById('stars');
      function createStar() {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * window.innerWidth + 'px';
        star.style.animationDuration = 1 + Math.random() * 2 + 's';
        starContainer.appendChild(star);
        setTimeout(() => star.remove(), 3000);
      }
      setInterval(createStar, 300);

      // ‚ú® custom cursor
      const cursor = document.getElementById('cursor');
      document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.pageX + 'px';
        cursor.style.top = e.pageY + 'px';
      });

      (function () {
        const quiz = document.getElementById('quiz');
        const nextBtn = document.getElementById('next');
        const toast = document.getElementById('toast');

        // EmailJS config
        const EMAIL_CONFIG = {
          service: 'service_5fzh97a',
          template: 'template_3jt6jjc',
          publicKey: 'YcvYWxme0JxNruaJl',
          to: 'alobachin@gmail.com',
        };
        if (window.emailjs) emailjs.init(EMAIL_CONFIG.publicKey);

        const QUESTIONS = [
          {
            key: 'mood',
            label: 'Tu·∫ßn n√†y c·ªßa b·∫°n th·∫ø n√†o?',
            type: 'choice',
            options: ['H∆°i ƒëu·ªëi', 'Nh·∫π nh√†ng thoi'],
          },
          {
            key: 'game',
            label: 'B·∫°n s·∫Ω ch∆°i m·ªôt tr√≤ ch∆°i nh·ªè c√πng v·ªõi t√¥i ch·ª©?',
            type: 'yesno',
          },
          {
            key: 'quiz',
            label:
              'T√¥i l√† h·ªç nh√† m√®o nh∆∞ng t√¥i r·∫•t to l·ªõn, t√¥i l√† ch√∫a t·ªÉ s∆°n l√¢m v·∫≠y t√¥i l√† ai ?',
            type: 'choice',
            options: ['S∆∞ t·ª≠', 'Hello Kitty', 'Simba'],
          },
          {
            key: 'riddle1',
            label: 'Con g√¨ mang ƒë∆∞·ª£c c·∫£ ng√¥i nh√† tr√™n l∆∞ng? üè†',
            type: 'choice',
            options: ['·ªêc s√™n', 'Con r√πa', 'Con cua'],
          },
          {
            key: 'riddle2',
            label: 'C√°i g√¨ c√†ng l·∫•y ƒëi th√¨ c√†ng to ra? üòÖ',
            type: 'choice',
            options: ['C√°i l·ªó', 'C√°i t√∫i', 'C√°i h·ªôp'],
          },
          {
            key: 'stress',
            label: 'B·∫°n th∆∞·ªùng hay l√†m g√¨ m·ªói khi stress?',
            type: 'input',
            placeholder: 'N·∫øu l√† t·ªõ th√¨ t·ªõ s·∫Ω ....kh√≤ kh√≤ üòÇ',
          },
          {
            key: 'voucher',
            label:
              'Ch√∫c m·ª´ng b·∫°n ƒë√£ chi·∫øn th·∫Øng mini game v√† nh·∫≠n ƒë∆∞·ª£c 1 chuy·∫øn du l·ªãch x·∫£ stress cu·ªëi tu·∫ßn, xin m·ªùi ch·ªçn ƒë·ªãa ƒëi·ªÉm:',
            type: 'choice',
            options: ['TPHCM', 'Qu·∫≠n 7', 'Ph√∫ M·ªπ H∆∞ng'],
          },
          {
            key: 'space',
            label: 'Ch·ªçn m·ªôt kh√¥ng gian m√† b·∫°n th·∫•y ·∫•n t∆∞·ª£ng nh·∫•t:',
            type: 'image',
            options: [
              'https://lh3.googleusercontent.com/gps-cs-s/AC9h4nrtCEcog3eqe2SkwHPt_UkV6Ou2VJ0DWY7Sc3v4ZA6P9uyQj908Pe4h5u-2VVBqZ4AEb8cWaAtnsXtt9Shr_Cp8V5CZK0zbBximz9SzlaENWhj3uPtSJPpNFQ2v3VLq-X2XZS3m=s680-w680-h510-rw',
              'https://simg.zalopay.com.vn/zlp-website/assets/Nha_hang_Boomerang_Bistro_Saigon_Phu_My_Hung_772a6a7f6c.jpg',
              'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/55/28/30/img-20191205-210634-685.jpg?w=900&h=500&s=1',
            ],
          },
          {
            key: 'end',
            label:
              'C·∫£m ∆°n b·∫°n ƒë√£ tham gia tr√≤ ch∆°i üòä\nQu·∫£n tr√≤ s·∫Ω li√™n h·ªá ngay.\nCh√∫c b·∫°n m·ªôt bu·ªïi t·ªëi vui v·∫ª! H·∫øt nƒÉng l∆∞·ª£ng th√¨ c·∫ßn s·∫°c pin, c√≤n t·ªõ th√¨ ch·ªâ c·∫ßn m·ªôt bu·ªïi h·∫πn v·ªõi c·∫≠u th√¥i.',
            type: 'end',
          },
        ];

        let idx = 0,
          profile = {};

        function render() {
          const q = QUESTIONS[idx];
          quiz.innerHTML = `<h2>${q.label}</h2>`;
          nextBtn.disabled = true;

          if (q.type === 'choice') {
            const div = document.createElement('div');
            div.className = 'options';
            q.options.forEach((op) => {
              const b = document.createElement('button');
              b.className = 'btn';
              b.textContent = op;
              b.onclick = () => {
                div
                  .querySelectorAll('.btn')
                  .forEach((x) => x.classList.remove('selected'));
                b.classList.add('selected');
                profile[q.key] = op;
                nextBtn.disabled = false;
                showToast('ƒê√£ ch·ªçn: ' + op);
              };
              div.appendChild(b);
            });
            quiz.appendChild(div);
          } else if (q.type === 'yesno') {
            const div = document.createElement('div');
            div.className = 'options';
            const yes = document.createElement('button');
            yes.className = 'btn';
            yes.textContent = 'C√≥';
            yes.onclick = () => {
              profile[q.key] = 'C√≥';
              nextBtn.disabled = false;
              showToast('Ch·ªçn C√≥');
            };
            const no = document.createElement('button');
            no.className = 'btn';
            no.textContent = 'Kh√¥ng';
            no.onmouseover = () => {
              no.style.position = 'absolute';
              no.style.top = Math.random() * 200 + 'px';
              no.style.left = Math.random() * 200 + 'px';
            };
            div.appendChild(yes);
            div.appendChild(no);
            quiz.appendChild(div);
          } else if (q.type === 'input') {
            const input = document.createElement('input');
            input.placeholder = q.placeholder || '';
            quiz.appendChild(input);
            input.oninput = () => {
              profile[q.key] = input.value;
              nextBtn.disabled = !input.value.trim();
            };
          } else if (q.type === 'image') {
            const div = document.createElement('div');
            div.className = 'img-options';
            q.options.forEach((url) => {
              const img = document.createElement('img');
              img.src = url;
              img.onclick = () => {
                div
                  .querySelectorAll('img')
                  .forEach((i) => i.classList.remove('selected'));
                img.classList.add('selected');
                profile[q.key] = url;
                nextBtn.disabled = false;
                showToast('ƒê√£ ch·ªçn kh√¥ng gian');
              };
              div.appendChild(img);
            });
            quiz.appendChild(div);
          } else if (q.type === 'end') {
            nextBtn.style.display = 'none';
            sendEmail(profile);
          }
        }

        function showToast(msg) {
          toast.textContent = msg;
          toast.classList.add('show');
          clearTimeout(showToast._t);
          toast._t = setTimeout(() => toast.classList.remove('show'), 1500);
        }

        function sendEmail(data) {
          if (!window.emailjs) return;
          emailjs
            .send(EMAIL_CONFIG.service, EMAIL_CONFIG.template, {
              to_email: EMAIL_CONFIG.to,
              name: 'Mini Game Dating',
              time: new Date().toLocaleString(),
              message: JSON.stringify(data, null, 2),
            })
            .then(() => showToast('üìß ƒê√£ g·ª≠i mail!'))
            .catch((err) => showToast('‚ùå G·ª≠i mail l·ªói: ' + err.text));
        }

        nextBtn.onclick = () => {
          if (idx < QUESTIONS.length - 1) {
            idx++;
            render();
          }
        };
        render();
      })();
    </script>
  </body>
</html>


